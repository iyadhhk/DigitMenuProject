(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,r){},129:function(e,t,r){},130:function(e,t,r){},138:function(e,t,r){},139:function(e,t,r){},141:function(e,t,r){},142:function(e,t,r){},143:function(e,t,r){},144:function(e,t,r){},175:function(e,t,r){},176:function(e,t,r){},177:function(e,t,r){},178:function(e,t,r){},179:function(e,t,r){},180:function(e,t,r){},181:function(e,t,r){},182:function(e,t,r){},183:function(e,t,r){},184:function(e,t,r){},185:function(e,t,r){},187:function(e,t,r){},188:function(e,t,r){},189:function(e,t,r){},190:function(e,t,r){},191:function(e,t,r){},192:function(e,t,r){},193:function(e,t,r){},194:function(e,t,r){},195:function(e,t,r){},196:function(e,t,r){},197:function(e,t,r){"use strict";r.r(t);var a,n,c,s,i,u,o,l,d,j=r(1),b=r(3),O=r.n(b),m=r(30),p=r.n(m),f=(r(105),r(11)),h=r(15),x=r(8),v=r.n(x),_=function(e){e?v.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete v.a.defaults.headers.common.Authorization},g=r(2),w=r(50),N=r(5),S=function(e){var t=e.children,r=(e.path,Object(w.a)(e,["children","path"])),a=Object(N.c)((function(e){return e.auth})),n=a.isAuthenticated,c=a.authStatus;return localStorage.token&&_(localStorage.token),Object(j.jsx)(h.b,Object(g.a)(Object(g.a)({},r),{},{render:function(){return n||"loading"===c.authUser?t:Object(j.jsx)(h.a,{to:"/signin"})}}))},k=function(e){var t=e.children,r=(e.path,Object(w.a)(e,["children","path"])),a=Object(N.c)((function(e){return e.auth})),n=a.isClient,c=a.authStatus;return localStorage.token&&_(localStorage.token),Object(j.jsx)(h.b,Object(g.a)(Object(g.a)({},r),{},{render:function(){return n||"loading"===c.authClient?t:Object(j.jsx)(h.a,{to:"/"})}}))},y=r(4),E=r(6),C=r.n(E),I=r(9),A=r(7),q=Object(A.b)("auth/auth-client",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n,c,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,n=t.restId,c=t.tableNumber,s=t.history,console.log("restid",n),console.log("restid",c),console.log("history",s),e.next=8,v.a.post("/auth/auth-client",{restId:n,tableNumber:c});case 8:return i=e.sent,localStorage.setItem("restId",n),localStorage.setItem("tableNumber",c),s.push("/client-page"),e.abrupt("return",i.data);case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,r){return e.apply(this,arguments)}}()),P=Object(A.b)("auth/login",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.post("/auth/login",t);case 4:return"admin"===(n=e.sent).data.role?t.history.push("/admin-section"):"owner"===n.data.role?t.history.push("/owner-section"):"worker"===n.data.role?t.history.push("/worker-section"):t.history.push("/"),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),V=Object(A.c)({name:"auth",initialState:{token:localStorage.getItem("token"),isAuthenticated:!1,isClient:!1,authStatus:{authClient:"idle",authUser:"idle"},authErrors:{authClient:null,authUser:null},user:null},reducers:{clearClient:function(e){return Object(g.a)(Object(g.a)({},e),{},{isClient:!1})},logout:function(e){return localStorage.removeItem("token"),Object(g.a)(Object(g.a)({},e),{},{token:null,isAuthenticated:!1,user:null})},initState:function(e){return localStorage.removeItem("token"),Object(g.a)(Object(g.a)({},e),{},{token:null,isAuthenticated:!1,isClient:!1,authStatus:{authClient:"idle",authUser:"idle"},authErrors:{authClient:null,authUser:null},user:null})}},extraReducers:(a={},Object(y.a)(a,P.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authUser:"loading"})})})),Object(y.a)(a,P.fulfilled,(function(e,t){return localStorage.setItem("token",t.payload.token),Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authUser:"succeded"}),authErrors:Object(g.a)(Object(g.a)({},e.authErrors),{},{authUser:null}),isAuthenticated:!0,user:t.payload})})),Object(y.a)(a,P.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authUser:"failed"}),authErrors:Object(g.a)(Object(g.a)({},e.authErrors),{},{authUser:t.payload})})})),Object(y.a)(a,q.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authClient:"loading"})})})),Object(y.a)(a,q.fulfilled,(function(e,t){return localStorage.setItem("token",t.payload.token),Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authClient:"succeded"}),authErrors:Object(g.a)(Object(g.a)({},e.authErrors),{},{authClient:t.payload}),isClient:!0})})),Object(y.a)(a,q.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{authStatus:Object(g.a)(Object(g.a)({},e.authStatus),{},{authClient:"failed"}),authErrors:Object(g.a)(Object(g.a)({},e.authErrors),{},{authClient:t.payload})})})),a)}),D=V.actions,W=D.logout,M=D.initState,L=(D.clearClient,V.reducer),U=r(22),R=r(33),F=r(12),z=r(0),B=r(10),T=Object(A.b)("contact/sendEmail",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.post("/contact/sendEmail",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Q=Object(A.c)({name:"contact",initialState:{contactStatus:"idle",errors:null},reducers:{},extraReducers:(n={},Object(y.a)(n,T.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{contactStatus:"loading"})})),Object(y.a)(n,T.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{contactStatus:"succeded",errors:null})})),Object(y.a)(n,T.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{contactStatus:"failed",errors:t.payload})})),n)}).reducer,J=(r(129),function(){var e=Object(b.useState)({username:"",email:"",message:""}),t=Object(B.a)(e,2),r=t[0],a=t[1],n=r.username,c=r.email,s=r.message,i=function(e){a(Object(g.a)(Object(g.a)({},r),{},Object(y.a)({},e.target.name,e.target.value)))},u=Object(N.b)(),o=Object(N.c)((function(e){return e.contact})),l=o.contactStatus,d=o.errors;Object(b.useEffect)((function(){"succeded"===l&&a({username:"",email:"",message:""})}),[l]);return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{className:"contact__Form",children:[Object(j.jsx)("span",{children:"failed"===l&&d.data.filter((function(e){return"username"===e.param}))[0]&&d.data.filter((function(e){return"username"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",name:"username",value:n,placeholder:" nom",onChange:i}),Object(j.jsx)("span",{children:"failed"===l&&d.data.filter((function(e){return"email"===e.param}))[0]&&d.data.filter((function(e){return"email"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"email",name:"email",value:c,placeholder:" email",onChange:i}),Object(j.jsx)("span",{children:"failed"===l&&d.data.filter((function(e){return"message"===e.param}))[0]&&d.data.filter((function(e){return"message"===e.param}))[0].msg}),Object(j.jsx)("textarea",{rows:"8",cols:"20",value:s,placeholder:"message",name:"message",onChange:i}),Object(j.jsxs)("h5",{className:"succeded"===l?"msg__sented":"msg__sented__hidden",children:["votre message a \xe9t\xe9 envoy\xe9 avec succes"," "]}),Object(j.jsx)("button",{className:"Butt__send",type:"submit",onClick:function(e){e.preventDefault(),u(T({username:n,email:c,message:s}))},children:"envoyer"})]})})}),$=Object(A.b)("adherent/adherent",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/adherent/adherent",{transformRequest:[function(e,t){return delete t.common.Authorization,e}]});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),G=Object(A.c)({name:"adherent",initialState:{adherentStatus:"idle",adherents:null,errors:null},reducers:{},extraReducers:(c={},Object(y.a)(c,$.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adherentStatus:"loading"})})),Object(y.a)(c,$.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adherents:t.payload,adherentStatus:"succeded",errors:null})})),Object(y.a)(c,$.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adherentStatus:"failed",errors:t.payload})})),c)}).reducer,H=(r(130),function(){var e=Object(N.b)();Object(b.useEffect)((function(){e(M())}),[]);var t=Object(N.c)((function(e){return e.adherent})),r=t.adherentStatus,a=(t.errors,t.adherents);return Object(b.useEffect)((function(){e($())}),[]),Object(j.jsxs)("div",{className:"home",children:[Object(j.jsxs)("div",{className:"home__content",children:[Object(j.jsxs)("div",{className:"home__content__left",children:[Object(j.jsx)("h2",{children:"Digitalisez vos cartes! "}),Object(j.jsx)("p",{children:"DigitMenu permet l'affichage dynamique et interactif de votre carte, vous pouvez g\xe9rer en quelques clics vos plats, menu, dessert et tous se met \xe0 jour automatiquement ..."}),Object(j.jsx)(f.b,{to:"/scan-code",children:Object(j.jsx)("button",{className:"home__content__btn",children:"Notre Menu "})})]}),Object(j.jsx)("div",{className:"scan",children:Object(j.jsx)("img",{src:"images/bg-light.png",alt:" "})})]}),Object(j.jsxs)("div",{className:"home__sante",children:[Object(j.jsx)("p",{children:"Votre sant\xe9 est une priorit\xe9 !"}),Object(j.jsx)("p",{children:"DigitMenu a \xe9t\xe9 con\xe7ue afin de garantir autant que possible votre sant\xe9 et celle de vos clients!"}),Object(j.jsx)("img",{src:"images/Codiv-19.png",alt:""})]}),Object(j.jsxs)("section",{className:"home__fonct",id:"sect1",children:[Object(j.jsx)("h4",{children:"Utilisation simple et efficace sans installation :"}),Object(j.jsxs)("div",{className:"home__fonct__step",children:[Object(j.jsx)(z.b.Provider,{value:{className:"check-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(U.a,{})})}),Object(j.jsx)("p",{children:"Le consommateur a juste besoin de scanner un QR code affich\xe9 sur vos tables"})]}),Object(j.jsxs)("div",{className:"home__fonct__step",children:[Object(j.jsx)(z.b.Provider,{value:{className:"check-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(U.a,{})})}),Object(j.jsx)("p",{children:"Il est alors redirig\xe9 automatiquement vers votre carte d\xe9mat\xe9rialis\xe9"})]}),Object(j.jsxs)("div",{className:"home__fonct__step",children:[Object(j.jsx)(z.b.Provider,{value:{className:"check-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(U.a,{})})}),Object(j.jsx)("p",{children:"la commande est prise sans le moindre contact"})]}),Object(j.jsxs)("div",{className:"home__fonct__img",children:[Object(j.jsx)("img",{src:"images/img1.png",alt:""}),Object(j.jsxs)("div",{className:"home__fonct__img__content",children:[Object(j.jsx)("img",{src:"images/img2.png",alt:""}),Object(j.jsx)(z.b.Provider,{value:{className:"plus-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(U.c,{})})}),Object(j.jsx)("img",{src:"images/img3.png",alt:""})]})]})]}),Object(j.jsxs)("div",{className:"block",children:[Object(j.jsx)("p",{children:"Booster votre restaurant !"}),Object(j.jsx)("p",{children:"Ouvrez vous des nouveaux horizons via le digital pour sortir de la crise du coronavirus"})]}),Object(j.jsxs)("section",{className:"home__avantages",id:"sect2",children:[Object(j.jsx)("p",{children:"En plus du respect des gestes barri\xe8res et du nouveau mode de vie que nous devons adopter, le menu digital pour votre restaurant vous permet de mettre \xe0 jour en temps r\xe9el votre carte et d'offrir une exp\xe9rience unique \xe0 vos clients."}),Object(j.jsx)("p",{children:"Consacrez-vous \xe0 votre art et ne gaspillez pas votre temps et votre \xe9nergie \xe0 d\xe9sinfecter vos cartes pour chaque nouveau client. DigitMenu est une solution rapide, \xe9conomique, qui respecte les gestes barri\xe8res pour vous lib\xe9rer."}),Object(j.jsx)("p",{children:"Toutes les mises \xe0 jour de votre menu digital restaurant sont imm\xe9diatement visibles par vos clients. Un plat cach\xe9 par suite d\u2019une rupture de stock ou d'un probl\xe8me en cuisine, un visuel \xe0 changer, un prix \xe0 adapter...le menu visible par vos clients est \xe0 jour, votre service est tr\xe8s largement am\xe9lior\xe9."}),Object(j.jsxs)("p",{children:[" ","Vous limitez votre impact sur la nature en \xe9vitant les r\xe9impressions r\xe9guli\xe8res de vos cartes. Vous ne gaspillez plus de papier et vous diminuez vos d\xe9chets pour vous inscrire dans une d\xe9marche \xe9coresponsable."]})]}),Object(j.jsxs)("section",{className:"home__adher",id:"sect3",children:[Object(j.jsx)("h1",{children:" Les adh\xe9rents "}),Object(j.jsx)("div",{className:"home__adher__items slider",children:Object(j.jsx)("div",{className:"slide-track",children:"loading"===r?Object(j.jsx)("span",{children:"Loading..."}):"succeded"===r?a&&a.length>0?a.map((function(e){return Object(j.jsx)("div",{className:"slide",children:Object(j.jsx)("img",{className:"images",src:e.logo,alt:"adherent"})},e._id)})):Object(j.jsx)("span",{children:"soyer le premier .."}):"failed"===r&&Object(j.jsx)("span",{children:"une erreur est survenue"})})})]}),Object(j.jsxs)("footer",{className:"footer",id:"sect4",children:[Object(j.jsx)(J,{}),Object(j.jsxs)("div",{className:"footer__content",children:[Object(j.jsxs)("div",{className:"social__contact",children:[Object(j.jsx)("div",{className:"contact__us__left contact__us__border",children:Object(j.jsx)("p",{children:"Nous contacter"})}),Object(j.jsxs)("div",{className:"social__icons",children:[Object(j.jsx)(z.b.Provider,{value:{className:"social__icons__style"},children:Object(j.jsx)(R.c,{})}),Object(j.jsx)(z.b.Provider,{value:{className:"social__icons__style"},children:Object(j.jsx)(U.b,{})}),Object(j.jsx)(z.b.Provider,{value:{className:"social__icons__style"},children:Object(j.jsx)(F.b,{})})]})]}),Object(j.jsx)("p",{className:"copy-right",children:"\xa9 2021 Copyright all right reserved."})]})]})]})}),K=r(39),X=r(34),Y=r(93),Z=function(e){return Object(j.jsx)(Y.Link,{activeClass:"active",to:e.section,spy:!0,smooth:!0,offset:-70,duration:900,children:e.children})},ee=(r(138),function(){var e=Object(b.useState)(!1),t=Object(B.a)(e,2),r=t[0],a=t[1],n=function(){return a(!1)},c=Object(N.b)(),s=Object(N.c)((function(e){return e.auth.isAuthenticated})),i=Object(N.c)((function(e){return e.auth.isClient})),u=Object(N.c)((function(e){return e.auth.user})),o=function(){c(W())},l=Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)(f.b,{to:"/admin-section",children:Object(j.jsx)("span",{className:"navbar__link__logo",children:Object(j.jsx)("img",{className:"navbar__link--logo",src:"images/logo/digitmenu-logo.svg",alt:"logo",onClick:n})})}),Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("span",{className:"navbar__link",onClick:o,children:"D\xe9connexion"})})]}),d=Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)(f.b,{to:"/owner-section",children:Object(j.jsx)("span",{className:"navbar__link__logo",children:Object(j.jsx)("img",{className:"navbar__link--logo",src:"images/logo/digitmenu-logo.svg",alt:"logo",onClick:n})})}),Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("span",{className:"navbar__link",onClick:o,children:"D\xe9connexion"})})]}),O=Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("span",{className:"navbar__link__logo",children:Object(j.jsx)("img",{className:"navbar__link--logo",src:"images/logo/digitmenu-logo.svg",alt:"logo",onClick:n})})}),Object(j.jsxs)("div",{className:r?"navbar__first-menu active":"navbar__first-menu",onClick:n,children:[Object(j.jsx)(Z,{section:"sect1",children:Object(j.jsx)("span",{className:"navbar__link",onClick:n,children:"fonctionnement"})}),Object(j.jsx)(Z,{section:"sect2",children:Object(j.jsx)("span",{className:"navbar__link",onClick:n,children:"avantages"})}),Object(j.jsx)(Z,{section:"sect3",children:Object(j.jsx)("span",{className:"navbar__link",onClick:n,children:"adh\xe9rents"})}),Object(j.jsx)(Z,{section:"sect4",children:Object(j.jsx)("span",{className:"navbar__link",onClick:n,children:"Nous contacter"})})]}),Object(j.jsxs)("div",{className:"navbar__second-menu",children:[Object(j.jsx)(f.b,{to:"/signin",onClick:n,children:Object(j.jsx)("span",{className:"navbar__link",children:"se connecter"})}),Object(j.jsx)("div",{className:"mobile-menu",onClick:function(){return a(!r)},children:r?Object(j.jsx)(z.b.Provider,{value:{className:"menu-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(X.b,{})})}):Object(j.jsx)(z.b.Provider,{value:{className:"menu-icon"},children:Object(j.jsx)("div",{children:Object(j.jsx)(K.a,{})})})})]})]}),m=Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)(f.b,{to:"/client-page",children:Object(j.jsx)("span",{className:"navbar__link__logo",children:Object(j.jsx)("img",{className:"navbar__link--logo",src:"images/logo/digitmenu-logo.svg",alt:"logo",onClick:n})})}),Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("span",{className:"navbar__link",children:"Deconnexion"})})]}),p=Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)(f.b,{to:"/worker-section",children:Object(j.jsx)("span",{className:"navbar__link__logo",children:Object(j.jsx)("img",{className:"navbar__link--logo",src:"images/logo/digitmenu-logo.svg",alt:"logo",onClick:n})})}),Object(j.jsx)(f.b,{to:"/",children:Object(j.jsx)("span",{className:"navbar__link",onClick:o,children:"D\xe9connexion"})})]}),h=s?"owner"===u.role?d:"admin"===u.role?l:p:i?m:O;return Object(j.jsx)("div",{className:"navbar",children:h})}),te=(r(139),function(){var e=Object(b.useState)({username:"",password:""}),t=Object(B.a)(e,2),r=t[0],a=t[1],n=r.username,c=r.password,s=Object(N.c)((function(e){return e.auth})),i=s.authStatus,u=s.authErrors,o=Object(h.g)(),l=Object(N.b)(),d=function(e){a(Object(g.a)(Object(g.a)({},r),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"signin",children:Object(j.jsxs)("div",{className:"signin__container",children:[Object(j.jsx)("h1",{children:"Sign In"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"signin__form__group",children:[Object(j.jsx)("h5",{children:"Username"}),Object(j.jsx)("span",{children:"failed"===i.authUser&&u.authUser&&u.authUser.data.filter((function(e){return"username"===e.param}))[0]&&u.authUser.data.filter((function(e){return"username"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"signin__container__form__input valid__input",name:"username",value:n,onChange:d})]}),Object(j.jsxs)("div",{className:"signin__form__group",children:[Object(j.jsx)("h5",{children:"Password"}),Object(j.jsx)("span",{children:"failed"===i.authUser&&u.authUser&&u.authUser.data.filter((function(e){return"password"===e.param}))[0]&&u.authUser.data.filter((function(e){return"password"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"password",className:"signin__container__form__input valid__input",name:"password",value:c,onChange:d})]}),Object(j.jsx)("button",{type:"submit",className:"signin__signInButton",onClick:function(e){e.preventDefault(),l(P({history:o,username:n,password:c}))},children:"loading"===i.authUser?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"Sign In"})})]})]})})}),re=r(99),ae=(r(141),function(){var e=Object(N.b)(),t=Object(h.g)(),r=Object(N.c)((function(e){return e.auth})).authStatus,a=Object(b.useState)({delay:500,result:null,code:""}),n=Object(B.a)(a,2),c=n[0],s=n[1],i=c.delay,u=c.result;c.code;return Object(b.useEffect)((function(){u&&e(q({restId:u.split("+")[0],tableNumber:u.split("+")[1],history:t}))}),[u]),Object(j.jsx)("div",{className:"code",children:"failed"===r.authClient?Object(j.jsxs)("div",{className:"message-client",children:[Object(j.jsx)(z.b.Provider,{value:{className:"auth-failed"},children:Object(j.jsx)("div",{children:Object(j.jsx)(U.d,{})})}),Object(j.jsx)("p",{children:"Ce qr Code n'est pas valide "})]}):Object(j.jsx)(b.Fragment,{children:Object(j.jsx)("div",{className:"reader",children:Object(j.jsx)(re.a,{className:"qr-reader",delay:i,style:{height:220,width:200},onError:function(e){console.error(e)},onScan:function(e){s(Object(g.a)(Object(g.a)({},c),{},{result:e}))}})})})})}),ne=(r(142),Object(A.b)("owner/create-owner",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,console.log(t),e.prev=2,e.next=5,v.a.post("/owner/create-owner",t);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}())),ce=Object(A.b)("owner/get-all",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/owner/owners");case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),se=Object(A.b)("owner/delete-owner",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/owner/del-owner",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ie=Object(A.c)({name:"owner",initialState:{owner:"",owners:null,adminStatus:{create:"idle",delete:"idle",getAll:"idle"},adminErrors:{create:null,delete:null,getAll:null}},reducers:{initErrors:function(e){return Object(g.a)(Object(g.a)({},e),{},{adminErrors:{create:null,delete:null,getAll:null}})}},extraReducers:(s={},Object(y.a)(s,ne.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{create:"loading"})})})),Object(y.a)(s,ne.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{create:"succeded"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{create:null}),owner:t.payload})})),Object(y.a)(s,ne.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{create:"failed"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{create:t.payload})})})),Object(y.a)(s,ce.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{getAll:"loading"})})})),Object(y.a)(s,ce.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{owners:t.payload,adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{getAll:"succeded"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{getAll:null})})})),Object(y.a)(s,ce.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{getAll:"failed"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{getAll:t.payload})})})),Object(y.a)(s,se.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{delete:"loading"})})})),Object(y.a)(s,se.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{owner:t.payload,adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{delete:"succeded"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{delete:null})})})),Object(y.a)(s,se.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{adminStatus:Object(g.a)(Object(g.a)({},e.adminStatus),{},{delete:"failed"}),adminErrors:Object(g.a)(Object(g.a)({},e.adminErrors),{},{delete:t.payload})})})),s)}),ue=(ie.actions.initErrors,ie.reducer),oe=(r(143),function(){var e=Object(b.useState)({username:"",password:""}),t=Object(B.a)(e,2),r=t[0],a=t[1],n=r.username,c=r.password,s=Object(N.b)(),i=function(e){a(Object(g.a)(Object(g.a)({},r),{},Object(y.a)({},e.target.name,e.target.value)))},u=Object(N.c)((function(e){return e.admin})),o=u.adminStatus,l=u.adminErrors;Object(b.useEffect)((function(){"succeded"===o.create&&a({username:"",password:""})}),[o]);return Object(j.jsxs)("div",{className:"addowner",children:[Object(j.jsx)("h3",{children:"Create new Owner"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"addowner__form__group",children:[Object(j.jsx)("h5",{children:"Username"}),Object(j.jsx)("span",{children:"failed"===o.create&&l.create&&l.create.data.filter((function(e){return"username"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"addowner__container__form__input valid__input",name:"username",value:n,onChange:i})]}),Object(j.jsxs)("div",{className:"addowner__form__group",children:[Object(j.jsx)("h5",{children:"Password"}),Object(j.jsx)("span",{children:"failed"===o.create&&l.create&&l.create.data.filter((function(e){return"password"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"password",className:"addowner__container__form__input valid__input",name:"password",value:c,onChange:i})]}),Object(j.jsx)("button",{type:"submit",className:"addowner__addownerButton",onClick:function(e){e.preventDefault(),s(ne({username:n,password:c}))},children:"loading"===o.create?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"Add"})})]})]})}),le=(r(144),function(e){var t=e.owners,r=Object(N.b)();return Object(j.jsxs)("div",{className:"ownerlist",children:[Object(j.jsx)("h3",{children:"List of Clients"}),t&&t.length>0?t.map((function(e){return Object(j.jsxs)("div",{className:"ownerlist__item",children:[Object(j.jsx)("h5",{children:"The Owner :"}),Object(j.jsx)("span",{children:e.username}),Object(j.jsx)("button",{onClick:function(){return t=e._id,void r(se({id:t}));var t},className:"owner__btn",children:"delete"})]},e._id)})):Object(j.jsx)("h5",{children:"you have no client yet"})]})}),de=r(16),je=r.n(de),be=(r(175),window.location.hostname),Oe=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return e.auth.isAuthenticated}));Object(b.useEffect)((function(){t&&e(ce())}),[t]),Object(b.useEffect)((function(){var t=je()("".concat(be,"/admin-space"),{transports:["websocket","polling"],secure:!0});t.on("connect",(function(){console.log(t.id)})),t.on("owners",(function(t){console.log("from server",t.action),e(ce())}))}),[]);var r=Object(N.c)((function(e){return e.admin})),a=r.owners,n=r.adminStatus;r.adminErrors;return Object(j.jsxs)("div",{className:"admin",children:[Object(j.jsx)(oe,{}),"loading"===n.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"failed"===n.getAll?Object(j.jsx)("h2",{children:"something went wrong"}):"succeded"===n.getAll&&a.length>0?Object(j.jsx)(le,{owners:a}):Object(j.jsx)("h5",{children:"you have no clients"})]})},me=Object(A.b)("restaurant/create-restaurant",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,t.forEach((function(e,t){console.log("key,value",t,e)})),e.prev=2,e.next=5,v.a.post("/restaurant/create-restaurant",t);case 5:return n=e.sent,e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,r){return e.apply(this,arguments)}}()),pe=Object(A.b)("restaurant/delete-restaurant",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/restaurant/del-rest",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),fe=Object(A.b)("restaurant/edit-restaurant",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/restaurant/edit-rest",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),he=Object(A.b)("restaurant/getAll",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/restaurant/my-rests");case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),xe=Object(A.c)({name:"restaurant",initialState:{restList:null,ownerStatus:{create:"idle",edit:"idle",delete:"idle",getList:"idle"},ownerErrors:{create:null,edit:null,delete:null,getList:null}},reducers:{},extraReducers:(i={},Object(y.a)(i,me.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{create:"loading"})})})),Object(y.a)(i,me.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{create:"succeded"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{create:null}),owner:t.payload})})),Object(y.a)(i,me.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{create:"failed"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{create:t.payload})})})),Object(y.a)(i,he.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{getList:"loading"})})})),Object(y.a)(i,he.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{getList:"succeded"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{getList:null}),restList:t.payload})})),Object(y.a)(i,he.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{getList:"failed"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{getList:t.payload})})})),Object(y.a)(i,pe.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{delete:"loading"})})})),Object(y.a)(i,pe.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{delete:"succeded"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{delete:null})})})),Object(y.a)(i,pe.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{delete:"failed"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{delete:t.payload})})})),Object(y.a)(i,fe.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{edit:"failed"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{edit:t.payload})})})),Object(y.a)(i,fe.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{edit:"loading"})})})),Object(y.a)(i,fe.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{ownerStatus:Object(g.a)(Object(g.a)({},e.ownerStatus),{},{edit:"succeded"}),ownerErrors:Object(g.a)(Object(g.a)({},e.ownerErrors),{},{edit:null})})})),i)}).reducer,ve=function(e){var t=new FileReader,r=new Promise((function(e,r){t.onload=function(t){return e(t.target.result)},t.onerror=function(e){return r(e)}}));return t.readAsDataURL(e),r},_e=(r(176),function(){var e=Object(b.useState)({name:"",address:"",logo:"",preview:""}),t=Object(B.a)(e,2),r=t[0],a=t[1],n=r.name,c=r.logo,s=r.address,i=r.preview,u=Object(N.b)(),o=Object(N.c)((function(e){return e.owner})),l=o.ownerStatus,d=o.ownerErrors;Object(b.useEffect)((function(){"succeded"===l.create&&a({name:"",address:"",logo:"",preview:""})}),[l]);var O=function(e){a(Object(g.a)(Object(g.a)({},r),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"addrestau",children:[Object(j.jsx)("h3",{children:"Ajouter un restaurant"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"addrestau__form__group",children:[Object(j.jsx)("h5",{children:"Nom du Restaurant"}),Object(j.jsx)("span",{children:"failed"===l.create&&d.create.data.filter((function(e){return"name"===e.param}))[0]&&d.create.data.filter((function(e){return"name"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"addrestau__container__form__input valid__input",name:"name",value:n,onChange:O})]}),Object(j.jsxs)("div",{className:"addrestau__form__group",children:[Object(j.jsx)("h5",{children:"adresse"}),Object(j.jsx)("span",{children:"failed"===l.create&&d.create.data.filter((function(e){return"address"===e.param}))[0]&&d.create.data.filter((function(e){return"address"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",placeholder:"num rue xxx ville",className:"addrestau__container__form__input valid__input",name:"address",value:s,onChange:O})]}),Object(j.jsxs)("div",{className:"addrestau__form__group",children:[Object(j.jsx)("h5",{children:"logo"}),Object(j.jsx)("span",{children:"failed"===l.create&&d.create.data.filter((function(e){return"logo"===e.param}))[0]&&d.create.data.filter((function(e){return"logo"===e.param}))[0].msg}),Object(j.jsxs)("div",{className:"img-section",children:[Object(j.jsx)("input",{type:"file",className:"addrestau__container__form__input valid__input",name:"logo",onChange:function(e){var t=e.target.files[0];t&&ve(t).then((function(e){a(Object(g.a)(Object(g.a)({},r),{},{logo:t,preview:e}))})).catch((function(e){a(Object(g.a)(Object(g.a)({},r),{},{preview:null}))}))}}),i&&Object(j.jsx)("img",{className:"logo-preview",src:i,alt:"d"})]})]}),Object(j.jsx)("button",{type:"submit",className:"addrestau__addrestauButton",onClick:function(e){e.preventDefault();var t=new FormData;t.append("name",n),t.append("address",s),t.append("image",c),u(me(t))},children:"loading"===l.create?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"ajouter"})})]})]})}),ge=(r(177),r(95)),we=r(96),Ne=function(e){var t=e.rest,r=Object(b.useState)({name:"",image:"",preview:"",address:"",edit:!1}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.name,i=n.image,u=n.preview,o=n.address,l=n.edit,d=Object(N.b)(),O=Object(N.c)((function(e){return e.owner})),m=O.ownerStatus,p=O.ownerErrors;Object(b.useEffect)((function(){"succeded"===m.edit&&c(Object(g.a)(Object(g.a)({},n),{},{edit:!1,preview:null}))}),[m]);var h=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"restlist__item",children:Object(j.jsxs)("div",{className:"restlist__item__form",children:[Object(j.jsxs)("div",{className:"restlist__item__form__group",children:[l?Object(j.jsx)("input",{type:"file",name:"image",onChange:function(e){var t=e.target.files[0];t&&ve(t).then((function(e){c(Object(g.a)(Object(g.a)({},n),{},{image:t,preview:e}))})).catch((function(e){c(Object(g.a)(Object(g.a)({},n),{},{preview:null}))}))}}):Object(j.jsx)("img",{className:"image-prev",src:t.logo,alt:""}),u&&Object(j.jsx)("img",{className:"image-prev",src:u,alt:" "})]}),Object(j.jsxs)("div",{className:"restlist__item__form__group",children:[Object(j.jsx)("h5",{children:"NOM : "}),Object(j.jsx)("span",{className:"error-message",children:l&&"failed"===m.edit&&p.edit.data.filter((function(e){return"name"===e.param}))[0]&&p.edit.data.filter((function(e){return"name"===e.param}))[0].msg}),l?Object(j.jsx)("input",{type:"text",name:"name",value:s,onChange:h}):Object(j.jsx)("p",{children:t.name})]}),Object(j.jsxs)("div",{className:"restlist__item__form__group",children:[Object(j.jsx)("h5",{children:"Addresse : "}),Object(j.jsx)("span",{className:"error-message",children:l&&"failed"===m.edit&&p.edit.data.filter((function(e){return"address"===e.param}))[0]&&p.edit.data.filter((function(e){return"address"===e.param}))[0].msg}),l?Object(j.jsx)("input",{type:"text",name:"address",value:o,onChange:h}):Object(j.jsx)("p",{children:t.address})]}),Object(j.jsxs)("div",{className:"restlist__item__form__button",children:[Object(j.jsx)("button",{onClick:function(){return e=t._id,void d(pe({restId:e}));var e},children:l&&"loading"===m.delete?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"Supprimer"})}),Object(j.jsx)("button",{onClick:function(){return function(e){if(l){var t=new FormData;t.append("name",s),t.append("address",o),t.append("image",i),t.append("restId",e._id),t.append("lastImg",e.logo),d(fe(t))}else c({name:e.name,address:e.address,edit:!0})}(t)},children:Object(j.jsx)("span",{children:"Modifier"})})]}),Object(j.jsxs)("div",{className:"restlist__item__form__links",children:[Object(j.jsx)(f.b,{to:{pathname:"/owner-section/my-rest",state:{restId:t._id,logo:t.logo,restName:t.name}},children:Object(j.jsx)("span",{children:Object(j.jsxs)("div",{className:"staff__bouton",children:[Object(j.jsx)(z.b.Provider,{value:{className:"staff-icon"},children:Object(j.jsx)(X.b,{})}),Object(j.jsx)("span",{children:"Menu"})]})})}),Object(j.jsx)(f.b,{to:{pathname:"/owner-section/staff",state:{restId:t._id}},children:Object(j.jsx)("span",{children:Object(j.jsxs)("div",{className:"staff__bouton",children:[Object(j.jsx)(z.b.Provider,{value:{className:"staff-icon"},children:Object(j.jsx)(U.e,{})}),Object(j.jsx)("span",{children:" Staff"})]})})}),Object(j.jsx)(f.b,{to:{pathname:"/owner-section/orders",state:{restId:t._id}},children:Object(j.jsx)("span",{children:Object(j.jsxs)("div",{className:"staff__bouton",children:[Object(j.jsx)(z.b.Provider,{value:{className:"staff-icon"},children:Object(j.jsx)(ge.a,{})}),Object(j.jsx)("span",{children:"Commandes"})]})})}),Object(j.jsx)(f.b,{to:{pathname:"/owner-section/tables",state:{restId:t._id}},children:Object(j.jsx)("span",{children:Object(j.jsxs)("div",{className:"staff__bouton",children:[Object(j.jsx)(z.b.Provider,{value:{className:"staff-icon"},children:Object(j.jsx)(we.a,{})}),Object(j.jsx)("span",{children:"Tables"})]})})})]})]})})},Se=(r(178),function(e){var t=e.restaurants,r=Object(N.c)((function(e){return e.owner})),a=r.ownerStatus;r.ownerErrors;return Object(j.jsxs)("div",{className:"restlist",children:[Object(j.jsx)("h3",{children:"Liste des restaurants"}),Object(j.jsx)("div",{className:"restlist__list",children:"loading"===a.getList?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"failed"===a.getList?Object(j.jsx)("h2",{children:"something went wrong"}):"succeded"===a.getList&&t.length>0?t.map((function(e){return Object(j.jsx)(Ne,{rest:e},e._id)})):Object(j.jsx)("h5",{children:" aucun restaurant n'est enregistr\xe9 "})})]})}),ke=Object(A.b)("menu/rest-menu",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/menu/get-rest-menu/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ye=Object(A.b)("menu/delete-item",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/menu/delete-item",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Ee=Object(A.b)("menu/edit-item",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/menu/edit-item",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Ce=Object(A.b)("restaurant/add-to-menu",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/menu/update-menu",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Ie=Object(A.c)({name:"menu",initialState:{menu:null,menuErrors:{create:null,edit:null,delete:null,getMenu:null},menuStatus:{create:"idle",edit:"idle",delete:"idle",getMenu:"idle"}},reducers:{},extraReducers:(u={},Object(y.a)(u,ke.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{getMenu:"loading"})})})),Object(y.a)(u,ke.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{getMenu:"succeded"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{getMenu:null}),menu:t.payload})})),Object(y.a)(u,ke.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{getMenu:"failed"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{getMenu:t.payload})})})),Object(y.a)(u,Ce.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{create:"loading"})})})),Object(y.a)(u,Ce.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{create:"succeded"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{create:null}),menu:t.payload})})),Object(y.a)(u,Ce.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{create:"failed"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{create:t.payload})})})),Object(y.a)(u,ye.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{delete:"loading"})})})),Object(y.a)(u,ye.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{delete:"succeded"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{delete:null}),menu:t.payload})})),Object(y.a)(u,ye.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{delete:"failed"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{delete:t.payload})})})),Object(y.a)(u,Ee.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{edit:"loading"})})})),Object(y.a)(u,Ee.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{edit:"succeded"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{edit:null}),menu:t.payload})})),Object(y.a)(u,Ee.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{menuStatus:Object(g.a)(Object(g.a)({},e.menuStatus),{},{edit:"failed"}),menuErrors:Object(g.a)(Object(g.a)({},e.menuErrors),{},{edit:t.payload})})})),u)}).reducer,Ae=(r(179),window.location.hostname),qe=function(){var e=O.a.useRef(),t=Object(b.useState)({name:"",price:"",image:"",preview:"",description:"",categorie:"entree"}),r=Object(B.a)(t,2),a=r[0],n=r[1],c=Object(h.h)().state,s=c.restId,i=c.restName;Object(b.useEffect)((function(){var e=je()("".concat(Ae,"/restaurant-space"),{transports:["websocket","polling"],secure:!0});return e.on("connect",(function(){})),s&&(console.log("restid",s),e.emit("joinRoom",{restId:s})),e.on("hi",(function(e){console.log("from server",e)})),function(){e.disconnect()}}),[s]);var u=a.name,o=a.price,l=a.image,d=a.description,m=a.categorie,p=a.preview,f=Object(N.b)(),x=function(e){n(Object(g.a)(Object(g.a)({},a),{},Object(y.a)({},e.target.name,e.target.value)))},v=Object(N.c)((function(e){return e.menu})),_=v.menuStatus,w=v.menuErrors;Object(b.useEffect)((function(){"succeded"===_.create&&(n({name:"",price:"",image:"",preview:"",description:"",categorie:"entree"}),e.current.value="")}),[_]);return Object(j.jsxs)("div",{className:"menu-add",children:[Object(j.jsxs)("div",{className:"menu__info",children:[Object(j.jsx)("h3",{children:" Cr\xe9ation de Menu"}),Object(j.jsx)("h5",{children:i})]}),Object(j.jsxs)("form",{className:"menu-add__form",children:[Object(j.jsxs)("div",{className:"menu__form__group",children:[Object(j.jsx)("h5",{children:" nom "}),Object(j.jsx)("span",{children:"failed"===_.create&&w.create.data.filter((function(e){return"name"===e.param}))[0]&&w.create.data.filter((function(e){return"name"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"menu__container__form__input",name:"name",value:u,onChange:x})]}),Object(j.jsxs)("div",{className:"menu__form__group",children:[Object(j.jsx)("h5",{children:"description"}),Object(j.jsx)("span",{children:"failed"===_.create&&w.create.data.filter((function(e){return"description"===e.param}))[0]&&w.create.data.filter((function(e){return"description"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"menu__container__form__input",name:"description",value:d,onChange:x})]}),Object(j.jsxs)("div",{className:"menu__form__group",children:[Object(j.jsx)("h5",{children:"prix"}),Object(j.jsx)("span",{children:"failed"===_.create&&w.create.data.filter((function(e){return"price"===e.param}))[0]&&w.create.data.filter((function(e){return"price"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"menu__container__form__input",name:"price",value:o,onChange:x})]}),Object(j.jsxs)("div",{className:"menu__form__group-select",children:[Object(j.jsx)("h5",{children:"categorie"}),Object(j.jsxs)("select",{name:"categorie",value:m,onChange:x,children:[Object(j.jsx)("option",{value:"entree",children:"Entree"},"entree"),Object(j.jsx)("option",{value:"boisson",children:"Boisson"},"boisson"),Object(j.jsx)("option",{value:"plat",children:"plat"},"plat"),Object(j.jsxs)("option",{value:"Dessert",children:["Dessert"," "]},"Dessert")]})]}),Object(j.jsxs)("div",{className:"menu__form__group",children:[Object(j.jsx)("h5",{children:"photo du plat "}),Object(j.jsxs)("div",{className:"img-section",children:[Object(j.jsx)("span",{children:"failed"===_.create&&w.create.data.filter((function(e){return"logo"===e.param}))[0]&&w.create.data.filter((function(e){return"logo"===e.param}))[0].msg}),Object(j.jsx)("input",{ref:e,type:"file",className:"menu__form__file",name:"image",onChange:function(e){var t=e.target.files[0];t&&ve(t).then((function(e){n(Object(g.a)(Object(g.a)({},a),{},{image:t,preview:e}))})).catch((function(e){n(Object(g.a)(Object(g.a)({},a),{},{preview:null}))}))}}),p&&Object(j.jsx)("img",{className:"image-preview",src:p,alt:"d"})]})]}),Object(j.jsx)("button",{type:"submit",className:"menu__menuButton",onClick:function(e){e.preventDefault();var t=new FormData;t.append("restaurant",s),t.append("name",u),t.append("price",o),t.append("image",l),t.append("description",d),t.append("categorie",m),f(Ce(t))},children:"loading"===_.create?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"Ajouter"})})]})]})},Pe=Object(A.b)("table/add-table",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.post("/table/create-table",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Ve=Object(A.b)("table/get-tables",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,console.log("id rest",t),e.next=5,v.a.get("/table/my-tables/".concat(t));case 5:return n=e.sent,e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),De=Object(A.b)("table/del-table",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.delete("/table/del-table/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),We=Object(A.c)({name:"table",initialState:{tableStatus:{create:"idle",delete:"idle",getAll:"idle"},tableErrors:{create:null,delete:null,getAll:null},table:null,listTable:null},reducers:{},extraReducers:(o={},Object(y.a)(o,Pe.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{create:"loading"})})})),Object(y.a)(o,Pe.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{table:t.payload,tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{create:"succeded"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{create:null})})})),Object(y.a)(o,Pe.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{create:"failed"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{create:t.payload})})})),Object(y.a)(o,Ve.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{getAll:"loading"})})})),Object(y.a)(o,Ve.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{listTable:t.payload,tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{getAll:"succeded"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{getAll:null})})})),Object(y.a)(o,Ve.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{getAll:"failed"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{getAll:t.payload})})})),Object(y.a)(o,De.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{delete:"loading"})})})),Object(y.a)(o,De.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{delete:"succeded"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{delete:null})})})),Object(y.a)(o,De.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{tableStatus:Object(g.a)(Object(g.a)({},e.tableStatus),{},{delete:"failed"}),tableErrors:Object(g.a)(Object(g.a)({},e.tableErrors),{},{delete:t.payload})})})),o)}).reducer,Me=(r(180),function(e){var t=e.restId,r=Object(b.useState)({tableNumber:"",tableCode:""}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.tableNumber,i=n.tableCode,u=Object(N.b)(),o=Object(N.c)((function(e){return e.table})),l=o.tableStatus,d=o.tableErrors;Object(b.useEffect)((function(){"succeded"===l.create&&c(Object(g.a)(Object(g.a)({},n),{},{tableNumber:"",tableCode:""}))}),[l]);return Object(j.jsxs)("div",{className:"add-table",children:[Object(j.jsx)("h3",{children:"Ajout des tables "}),Object(j.jsxs)("form",{className:"add-table__form",children:[Object(j.jsxs)("div",{className:"add-table__form__group",children:[Object(j.jsx)("h5",{children:"Num\xe9ro de table"}),Object(j.jsx)("input",{type:"number",name:"tableNumber",value:s,onChange:function(e){c({tableNumber:e.target.value,tableCode:t+"+"+e.target.value})},min:"1"}),"failed"===l.create&&Object(j.jsxs)("span",{className:"add-table-error",children:[" ",d.create.data[0].msg]})]}),Object(j.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),u(Pe({tableNumber:s,tableCode:i,restaurant:t}))},children:"loading"===l.create?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"Ajouter"})})]})]})}),Le=r(97),Ue=(r(181),function(e){var t=e.tables,r=Object(N.b)(),a=Object(b.useRef)(),n=Object(Le.useReactToPrint)({content:function(){return a.current},pageStyle:"\n      @page {\n    size: 100mm 100mm;\n  }\n    "});return Object(j.jsxs)("div",{className:"tables",children:[Object(j.jsx)("h4",{children:"liste des tables"}),t&&t.map((function(e){return Object(j.jsxs)("div",{className:"tables__single-table",children:[Object(j.jsxs)("div",{className:"tables__single-table__info",children:[Object(j.jsx)("h4",{children:"Num\xe9ro de table"}),Object(j.jsx)("p",{children:e.tableNumber})]}),Object(j.jsx)("img",{ref:a,src:"/images/"+e.codeImg,alt:"code"}),Object(j.jsxs)("div",{className:"tables__single-table__buttons",children:[Object(j.jsx)("button",{onClick:n,children:"Imprimer"}),Object(j.jsx)("button",{onClick:function(){return t=e._id,void r(De(t));var t},children:"Supprimer"})]})]},e._id)}))]})}),Re=(r(182),function(e){var t=e.channel,r=Object(h.h)(),a=Object(N.b)(),n=r.state.restId;Object(b.useEffect)((function(){a(Ve(n))}),[a,n]),Object(b.useEffect)((function(){t&&t.on("tables",(function(e){console.log("tables",e.action),a(Ve(n))}))}),[t]);var c=Object(N.c)((function(e){return e.table})),s=c.listTable,i=c.tableStatus;return Object(j.jsxs)("div",{className:"table-list",children:[Object(j.jsx)(Me,{restId:n,tables:s}),"loading"===i.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"failed"===i.getAll?Object(j.jsx)("h4",{children:"une erreur est survenue ! veuillez r\xe9\xe9sayer SVP"}):"succeded"===i.getAll&&s.length>0?Object(j.jsx)(Ue,{tables:s}):Object(j.jsx)("h4",{children:"Aucune table n'est enregistr\xe9e "})]})}),Fe=Object(A.b)("staff/create-worker",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.post("/worker/create-worker",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ze=Object(A.b)("staff/get-all",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/worker/workers/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Be=Object(A.b)("staff/delete-worker",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/worker/del-worker",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),Te=Object(A.c)({name:"staff",initialState:{worker:"",workers:null,workerStatus:{create:"idle",delete:"idle",getAll:"idle"},workerErrors:{create:"null",delete:"null",getAll:"null"}},reducers:{},extraReducers:(l={},Object(y.a)(l,Fe.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{create:"loading"})})})),Object(y.a)(l,Fe.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{worker:t.payload,workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{create:"succeded"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{create:"null"})})})),Object(y.a)(l,Fe.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{create:"failed"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{create:t.payload})})})),Object(y.a)(l,ze.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{getAll:"loading"})})})),Object(y.a)(l,ze.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workers:t.payload,workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{getAll:"succeded"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{getAll:"null"})})})),Object(y.a)(l,ze.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{getAll:"failed"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{getAll:t.payload})})})),Object(y.a)(l,Be.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{delete:"loading"})})})),Object(y.a)(l,Be.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{worker:t.payload,workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{delete:"succeded"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{delete:"null"})})})),Object(y.a)(l,Be.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{workerStatus:Object(g.a)(Object(g.a)({},e.workerStatus),{},{delete:"failed"}),workerErrors:Object(g.a)(Object(g.a)({},e.workerErrors),{},{delete:t.payload})})})),l)}).reducer,Qe=(r(183),function(e){var t=e.restId,r=Object(b.useState)({username:"",password:""}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.username,i=n.password,u=Object(N.c)((function(e){return e.staff})),o=u.workerStatus,l=u.workerErrors;Object(b.useEffect)((function(){"succeded"===o.create&&c({username:"",password:""})}),[o]);var d=Object(N.b)(),O=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"add-worker",children:[Object(j.jsx)("h3",{children:"Ajouter un nouveau personnel"}),Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"add-worker__form__group",children:[Object(j.jsx)("h5",{children:"login "}),Object(j.jsx)("span",{children:"failed"===o.create&&l.create&&l.create.data.filter((function(e){return"username"===e.param}))[0]&&l.create.data.filter((function(e){return"username"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"text",className:"add-worker__container__form__input",name:"username",value:s,onChange:O})]}),Object(j.jsxs)("div",{className:"add-worker__form__group",children:[Object(j.jsx)("h5",{children:"Mot de passe"}),Object(j.jsx)("span",{children:"failed"===o.create&&l.create&&l.create.data.filter((function(e){return"password"===e.param}))[0]&&l.create.data.filter((function(e){return"password"===e.param}))[0].msg}),Object(j.jsx)("input",{type:"password",className:"add-worker__container__form__input",name:"password",value:i,onChange:O})]}),Object(j.jsx)("button",{type:"submit",className:"add-worker__addButton",onClick:function(e){e.preventDefault(),d(Fe({username:s,password:i,restaurantId:t}))},children:"loading"===o.create?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):Object(j.jsx)("span",{children:"ajouter"})})]})]})}),Je=(r(184),function(e){var t=e.list,r=Object(N.b)();return Object(j.jsxs)("div",{className:"workerlist",children:[Object(j.jsx)("h3",{children:"Liste des personnels"}),t&&t.length>0&&t.map((function(e){return Object(j.jsxs)("div",{className:"workerlist__item",children:[Object(j.jsxs)("div",{className:"workerlist__item__info",children:[Object(j.jsx)("h4",{children:"Login :"}),Object(j.jsx)("span",{children:e.username})]}),Object(j.jsx)("button",{onClick:function(){return t=e._id,void r(Be({id:t}));var t},className:"worker__btn",children:"Supprimer"})]},e._id)}))]})}),$e=(r(185),function(e){var t=e.channel,r=Object(h.h)().state.restId,a=Object(N.b)();Object(b.useEffect)((function(){a(ze(r))}),[]);var n=Object(N.c)((function(e){return e.staff})),c=n.workers,s=n.workerStatus;return Object(b.useEffect)((function(){t&&t.on("workers",(function(e){console.log("workers",e.action),a(ze(r))}))}),[t]),Object(j.jsxs)("div",{className:"staff",children:[Object(j.jsx)(Qe,{restId:r}),"loading"===s.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"failed"===s.getAll?Object(j.jsx)("h4",{children:"Une erreur est survenue"}):"succeded"===s.getAll&&c.length>0?Object(j.jsx)(Je,{list:c}):Object(j.jsx)("h4",{children:"La liste des personnels est vide "})]})}),Ge=r(19),He=r.n(Ge),Ke=r(29),Xe=Object(A.b)("order/create-order",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.post("/order/create-order",t.data);case 4:return n=e.sent,t.history.push("/"),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),Ye=Object(A.b)("order/update-order",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/update-order",t.data);case 4:return n=e.sent,t.history.push("/"),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),Ze=Object(A.b)("order/getById",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/order/get-client-order/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),et=Object(A.b)("order/getAll",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.get("/order/get-order/".concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),tt=Object(A.b)("order/checkout-order",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/checkout-order",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),rt=Object(A.b)("order/cancel-order",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/cancel-order",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),at=Object(A.b)("order/confirm-cancel",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/confirm-cancel",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),nt=Object(A.b)("order/refuse-cancel",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/refuse-cancel",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),ct=Object(A.b)("order/edit-preorder",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/edit-preorder",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),st=Object(A.b)("order/confirm-edit-preorder",function(){var e=Object(I.a)(C.a.mark((function e(t,r){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.rejectWithValue,e.prev=1,e.next=4,v.a.put("/order/confirm-edit-preorder",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",a(e.t0.response.data));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),it=Object(A.c)({name:"order",initialState:{preOrder:[],order:null,orderStatus:{create:"idle",edit:"idle",getOne:"idle",getAll:"idle",checkout:"idle",cancel:"idle"},orderErrors:{create:null,edit:null,getOne:null,getAll:null,checkout:null,cancel:null},orders:null},reducers:{addToOrder:function(e,t){var r=t.payload,a=r.name,n=r.price,c=r.createdAt,s=e.preOrder.findIndex((function(e){return e.name===a})),i=Object(Ke.a)(e.preOrder);return-1===s?Object(g.a)(Object(g.a)({},e),{},{preOrder:[].concat(Object(Ke.a)(e.preOrder),[{name:a,price:n,quantity:1,createdAt:c}])}):(i[s]=Object(g.a)(Object(g.a)({},i[s]),{},{quantity:i[s].quantity+1,price:Number(i[s].price)+Number(n),createdAt:c}),Object(g.a)(Object(g.a)({},e),{},{preOrder:i}))},removeFromOrder:function(e,t){var r=t.payload,a=r.name,n=r.price,c=r.createdAt,s=e.preOrder.findIndex((function(e){return e.name===a})),i=Object(Ke.a)(e.preOrder);return i[s]=Object(g.a)(Object(g.a)({},i[s]),{},{quantity:i[s].quantity-1,price:Number(i[s].price)-Number(n),createdAt:c}),0===i[s].quantity&&i.splice(s,1),Object(g.a)(Object(g.a)({},e),{},{preOrder:i})},addComment:function(e,t){var r=t.payload,a=r.name,n=r.comment,c=e.preOrder.findIndex((function(e){return e.name===a})),s=Object(Ke.a)(e.preOrder);return s[c]=Object(g.a)(Object(g.a)({},s[c]),{},{comment:n}),Object(g.a)(Object(g.a)({},e),{},{preOrder:s})},deletePreOrder:function(e){return Object(g.a)(Object(g.a)({},e),{},{preOrder:[]})}},extraReducers:(d={},Object(y.a)(d,Xe.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{create:"loading"})})})),Object(y.a)(d,Xe.fulfilled,(function(e,t){return localStorage.removeItem("token"),localStorage.removeItem("restId"),localStorage.removeItem("tableNumber"),localStorage.setItem("id",t.payload.id),Object(g.a)(Object(g.a)({},e),{},{order:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{create:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{create:null})})})),Object(y.a)(d,Xe.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{create:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{create:t.payload})})})),Object(y.a)(d,Ye.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{edit:"loading"})})})),Object(y.a)(d,Ye.fulfilled,(function(e,t){return localStorage.removeItem("token"),localStorage.removeItem("restId"),localStorage.removeItem("tableNumber"),Object(g.a)(Object(g.a)({},e),{},{order:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{edit:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{edit:null})})})),Object(y.a)(d,Ye.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{edit:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{edit:t.payload})})})),Object(y.a)(d,Ze.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getOne:"loading"})})})),Object(y.a)(d,Ze.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{order:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getOne:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{getOne:null})})})),Object(y.a)(d,Ze.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getOne:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{getOne:t.payload})})})),Object(y.a)(d,et.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getAll:"loading"})})})),Object(y.a)(d,et.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orders:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getAll:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{getAll:null})})})),Object(y.a)(d,et.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{getAll:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{getAll:t.payload})})})),Object(y.a)(d,tt.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{checkout:"loading"})})})),Object(y.a)(d,tt.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{order:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{checkout:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{checkout:null})})})),Object(y.a)(d,tt.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{checkout:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{checkout:t.payload})})})),Object(y.a)(d,rt.pending,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{cancel:"loading"})})})),Object(y.a)(d,rt.fulfilled,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{order:t.payload,orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{cancel:"succeded"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{cancel:null})})})),Object(y.a)(d,rt.rejected,(function(e,t){return Object(g.a)(Object(g.a)({},e),{},{orderStatus:Object(g.a)(Object(g.a)({},e.orderStatus),{},{cancel:"failed"}),orderErrors:Object(g.a)(Object(g.a)({},e.orderErrors),{},{cancel:t.payload})})})),d)}),ut=it.actions,ot=ut.addToOrder,lt=ut.removeFromOrder,dt=ut.addComment,jt=ut.deletePreOrder,bt=it.reducer;r(187),r(91);He.a.locale("fr");var Ot=window.location.hostname,mt=function(){var e=Object(b.useState)(!1),t=Object(B.a)(e,2),r=t[0],a=t[1],n=Object(b.useState)({today:He()().format(),filterByDate:!1}),c=Object(B.a)(n,2),s=c[0],i=c[1],u=s.today,o=s.filterByDate,l=Object(h.h)().state.restId,d=Object(N.b)();Object(b.useEffect)((function(){var e=je()("".concat(Ot,"/restaurant-space"),{transports:["websocket","polling"],secure:!0});e.on("connect",(function(){console.log(e.id)})),l&&(e.emit("joinRoom",{restId:l}),console.log("restid",l)),e.on("message",(function(e){console.log("new order------------",e),d(et(l))}))}),[]),Object(b.useEffect)((function(){d(et(l))}),[]);var O=Object(N.c)((function(e){return e.order})),m=O.orders,p=O.orderStatus,f=function(e){a(e)};return Object(j.jsxs)("div",{className:"orders",children:[Object(j.jsx)("h2",{children:"Liste des commandes"}),Object(j.jsxs)("div",{className:"orders__buttons",children:[Object(j.jsx)("button",{className:r?"orders__buttons--normal":"orders__buttons--active",onClick:function(){return f(!1)},children:"Non Pay\xe9"}),Object(j.jsx)("button",{className:r?"orders__buttons--active":"orders__buttons--normal",onClick:function(){return f(!0)},children:"Pay\xe9"}),Object(j.jsx)("button",{className:o?"orders__buttons--active":"orders__buttons--normal",onClick:function(){i(Object(g.a)(Object(g.a)({},s),{},{filterByDate:!o}))},children:"Cmdes de jour"})]}),"loading"===p.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"succeded"===p.getAll?m&&m.filter((function(e){return e.paid===r&&(o?He()(e.createdAt).isSame(u,"day"):He()(e.createdAt).isBefore(u,"day"))})).slice(0).reverse().map((function(e){return Object(j.jsxs)("div",{className:"orders__items",children:[Object(j.jsxs)("p",{children:["Table ",e.tableNumber]}),e.items.slice(0).reverse().map((function(e){return Object(j.jsxs)("div",{className:"orders__items__single",children:[Object(j.jsxs)("div",{className:"orders__items__info",children:[Object(j.jsx)("p",{children:e.name}),Object(j.jsx)("p",{children:e.quantity}),Object(j.jsx)("p",{className:"order__comment",children:e.comment})]}),Object(j.jsx)("p",{className:"orders__items__time",children:He()(e.createdAt).fromNow()})]},e._id)})),Object(j.jsxs)("p",{children:["Total : ",e.total]})]},e._id)})):Object(j.jsx)("h4",{children:"un probl\xe9me est survenu..Veuillez r\xe9essayer SVP"})]})},pt=(r(188),function(e){var t=e.item,r=Object(b.useState)({name:"",price:"",description:"",image:"",preview:"",edit:!1}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.name,i=n.price,u=n.description,o=n.edit,l=n.image,d=n.preview,O=Object(N.c)((function(e){return e.menu})),m=O.menu,p=O.menuStatus,f=O.menuErrors,h=Object(N.b)(),x=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(y.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{className:"menu-item",children:[Object(j.jsxs)("div",{className:"menu-item__edit-group",children:[Object(j.jsx)("h5",{children:"NOM : "}),Object(j.jsx)("span",{children:o&&"failed"===p.edit&&f.edit.data.filter((function(e){return"name"===e.param}))[0]&&f.edit.data.filter((function(e){return"name"===e.param}))[0].msg}),o?Object(j.jsx)("input",{type:"text",value:s,name:"name",onChange:x}):Object(j.jsx)("p",{children:t.name})]}),Object(j.jsxs)("div",{className:"menu-item__edit-group",children:[Object(j.jsx)("h5",{children:"prix : "}),Object(j.jsx)("span",{children:o&&"failed"===p.edit&&f.edit.data.filter((function(e){return"price"===e.param}))[0]&&f.edit.data.filter((function(e){return"price"===e.param}))[0].msg}),o?Object(j.jsx)("input",{type:"text",value:i,name:"price",onChange:x}):Object(j.jsx)("p",{children:t.price})]}),Object(j.jsxs)("div",{className:"menu-item__edit-group",children:[Object(j.jsx)("h5",{children:"description:"}),Object(j.jsx)("span",{children:o&&"failed"===p.edit&&f.edit.data.filter((function(e){return"description"===e.param}))[0]&&f.edit.data.filter((function(e){return"description"===e.param}))[0].msg}),o?Object(j.jsx)("input",{type:"text",value:u,name:"description",onChange:x}):Object(j.jsx)("p",{children:t.description})]}),o?Object(j.jsx)("input",{className:"input-file",type:"file",name:"image",onChange:function(e){var t=e.target.files[0];t&&ve(t).then((function(e){c(Object(g.a)(Object(g.a)({},n),{},{image:t,preview:e}))})).catch((function(e){c(Object(g.a)(Object(g.a)({},n),{},{preview:null}))}))}}):Object(j.jsx)("img",{src:"/"+t.image,alt:"food"}),d&&Object(j.jsx)("img",{src:d,alt:"plat"}),Object(j.jsxs)("div",{className:"menu-item__buttons",children:[Object(j.jsx)("div",{children:Object(j.jsxs)("button",{className:"icon_bouton",onClick:function(){return e=t._id,void h(ye({idMenu:m.menu._id,id:e}));var e},children:[Object(j.jsx)(z.b.Provider,{value:{className:"icon__Food"},children:Object(j.jsx)("div",{children:Object(j.jsx)(X.a,{})})}),"Supprimer"]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("button",{className:"icon_bouton",onClick:function(){return function(){if(o){var e=new FormData;e.append("name",s),e.append("description",u),e.append("price",i),e.append("image",l),e.append("idMenu",m.menu._id),e.append("idItem",t._id),e.append("lastImg",t.image),h(Ee(e))}else c({name:t.name,price:t.price,description:t.description,edit:!0})}(t._id)},children:[Object(j.jsx)(z.b.Provider,{value:{className:"icon__Food"},children:Object(j.jsx)("div",{children:Object(j.jsx)(R.b,{})})}),"Modifier"]})})]})]})}),ft=(r(189),function(e){var t=e.menu;return Object(j.jsxs)("div",{className:"menu",children:[Object(j.jsx)("p",{className:"menu__cat",children:"Entr\xe9e"}),Object(j.jsx)("div",{className:"menu__cat__list",children:t.menu.items.filter((function(e){return"entree"===e.categorie})).map((function(e){return Object(j.jsx)(pt,{item:e},e._id)}))}),Object(j.jsx)("p",{className:"menu__cat",children:"Plat"}),Object(j.jsx)("div",{className:"menu__cat__list",children:t.menu.items.filter((function(e){return"plat"===e.categorie})).map((function(e){return Object(j.jsx)(pt,{item:e},e._id)}))}),Object(j.jsx)("p",{className:"menu__cat",children:"Boisson"}),Object(j.jsx)("div",{className:"menu__cat__list",children:t.menu.items.filter((function(e){return"boisson"===e.categorie})).map((function(e){return Object(j.jsx)(pt,{item:e},e._id)}))}),Object(j.jsx)("p",{className:"menu__cat",children:"Dessert"}),Object(j.jsx)("div",{className:"menu__cat__list",children:t.menu.items.filter((function(e){return"Dessert"===e.categorie})).map((function(e){return Object(j.jsx)(pt,{item:e},e._id)}))})]})}),ht=(r(190),r(191),window.location.hostname),xt=function(){var e=Object(h.h)().state,t=e.restId,r=e.logo,a=Object(N.b)(),n=Object(N.c)((function(e){return e.menu})),c=n.menu,s=n.menuStatus;n.menuErrors;return Object(b.useEffect)((function(){a(ke(t))}),[t]),Object(b.useEffect)((function(){var e=je()("".concat(ht,"/restaurant-space"),{transports:["websocket","polling"],secure:!0});e.on("connect",(function(){console.log(e.id),e.emit("joinRoom",{restId:t})})),e.on("newMenu",(function(e){a(ke(t))}))}),[t]),Object(j.jsxs)("div",{className:"my-rest",children:[Object(j.jsx)(qe,{}),"loading"===s.getMenu?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"failed"===s.getMenu?Object(j.jsx)("h4",{children:"une erreur est survenue , veuillez r\xe9\xe9sayer SVP"}):"succeded"===s.getMenu&&c.menu.items.length>0?Object(j.jsx)(ft,{menu:c,logo:r}):Object(j.jsx)("h5",{children:"aucun menu n'est enregistr\xe9 pour ce restaurant"})]})},vt=window.location.hostname,_t=function(){var e=Object(b.useState)(null),t=Object(B.a)(e,2),r=t[0],a=t[1],n=Object(N.c)((function(e){return e.auth})).isAuthenticated,c=Object(N.b)();Object(b.useEffect)((function(){n&&c(he())}),[n]),Object(b.useEffect)((function(){var e=je()("".concat(vt,"/owner-space"),{transports:["websocket","polling"],secure:!0});a(e),e.on("connect",(function(){console.log(e.id)})),e.on("restaurants",(function(e){console.log("from server",e.action),c(he())}))}),[]);var s=Object(N.c)((function(e){return e.owner})).restList;return Object(j.jsx)("div",{className:"owner",children:Object(j.jsxs)(h.d,{children:[Object(j.jsxs)(h.b,{exact:!0,path:"/owner-section",children:[Object(j.jsx)(_e,{}),Object(j.jsx)(Se,{restaurants:s})]}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/menu",children:Object(j.jsx)(qe,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/rest-menu",children:Object(j.jsx)(ft,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/my-rest",children:Object(j.jsx)(xt,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/tables",children:Object(j.jsx)(Re,{channel:r})}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/staff",children:Object(j.jsx)($e,{channel:r})}),Object(j.jsx)(h.b,{exact:!0,path:"/owner-section/orders",children:Object(j.jsx)(mt,{})})]})})};r(192);He.a.locale("fr");var gt=window.location.hostname,wt=function(){var e=Object(b.useState)(""),t=Object(B.a)(e,2),r=t[0],a=t[1],n=Object(N.c)((function(e){return e.auth})),c=n.user,s=n.isAuthenticated,i=Object(N.b)();Object(b.useEffect)((function(){var e=je()("".concat(gt,"/restaurant-space"),{transports:["websocket","polling"],secure:!0});e.on("connect",(function(){console.log(e.id)})),c&&(e.emit("joinRoom",{restId:c.restaurantId}),console.log("restid",c.restaurantId)),e.on("message",(function(e){console.log("new order------------",e),i(et(c.restaurantId))}))}),[c]),Object(b.useEffect)((function(){s&&(i(Ve(c.restaurantId)),i(et(c.restaurantId)))}),[s]);var u=Object(N.c)((function(e){return e.table})),o=u.listTable,l=u.tableStatus;Object(b.useEffect)((function(){o&&o.length>0&&a(o[0].tableNumber)}),[o]);var d=Object(N.c)((function(e){return e.order})),O=d.orders,m=d.orderStatus,p=function(){var e=Object(I.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(tt({orderId:t}));case 2:return e.next=4,i(et(c.restaurantId));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"worker",children:[Object(j.jsx)("h2",{children:"List of orders"}),Object(j.jsxs)("div",{className:"worker__tables",children:[Object(j.jsx)("p",{children:" Selectionnez une table "}),"loading"===l.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"succeded"===l.getAll?Object(j.jsx)("select",{name:"filterBy",onChange:function(e){a(e.target.value)},children:o&&o.length>0?o.map((function(e,t){return Object(j.jsxs)("option",{defaultValue:!0,value:e.tableNumber,children:["table ",e.tableNumber]},e._id)})):Object(j.jsx)("option",{children:"aucune table trouv\xe9"})}):Object(j.jsx)("h5",{children:"un probl\xe9me est survenue .. veuillez r\xe9essayer "})]}),Object(j.jsx)("div",{className:"worker__content",children:"loading"===m.getAll?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"succeded"===m.getAll?O&&O.filter((function(e){if(!e.paid&&e.tableNumber===Number(r))return e})).slice(0).reverse().map((function(e){return Object(j.jsxs)("div",{className:"worker__orders",children:[e.items.slice(0).reverse().map((function(t){return Object(j.jsx)("div",{className:"worker__orders__items",children:Object(j.jsxs)("div",{className:"worker__orders__items__info",children:[Object(j.jsxs)("div",{className:"req__info",children:[Object(j.jsx)("p",{children:t.name}),Object(j.jsxs)("p",{children:[" quantit\xe9 :",t.quantity]})]}),Object(j.jsx)("div",{className:"req__info",children:!t.confirmed&&Object(j.jsxs)(b.Fragment,{children:[Object(j.jsxs)("p",{className:"req__dmd",children:["demande","cancel"===e.preOrder.filter((function(e){return e.itemId===t._id}))[0].requestedAction?Object(j.jsx)("span",{children:" d'annulation "}):Object(j.jsxs)("p",{children:["de modification du quantit\xe9",Object(j.jsxs)("span",{children:["(nouvelle quantit\xe9 :",e.preOrder.length>0&&e.preOrder.filter((function(e){return e.itemId===t._id}))[0].newQuantity,")"]})]})]}),Object(j.jsxs)("div",{className:"butt__response",children:["cancel"===e.preOrder.filter((function(e){return e.itemId===t._id}))[0].requestedAction&&Object(j.jsx)("button",{className:"button__req__valid",onClick:function(){return r=t._id,a=e._id,void i(at({itemId:r,orderId:a}));var r,a},children:"valider"}),Object(j.jsx)("button",{className:"button__req__reject",onClick:function(){return r=t._id,a=e._id,void i(nt({itemId:r,orderId:a}));var r,a},children:"refuser"}),"edit"===e.preOrder.filter((function(e){return e.itemId===t._id}))[0].requestedAction&&Object(j.jsx)("button",{className:"button__req__valid",onClick:function(){return r=t._id,a=e._id,void i(st({itemId:r,orderId:a}));var r,a},children:"confirmer"})]})]})}),t.comment&&Object(j.jsxs)("p",{className:"comment",children:[Object(j.jsx)("span",{children:"preferences: "}),t.comment]}),Object(j.jsx)("span",{className:"timeline",children:He()(t.createdAt).fromNow()})]})},t._id)})),Object(j.jsxs)("p",{children:["Total : ",e.total]}),Object(j.jsx)("button",{className:"butt-pay",onClick:function(){return p(e._id)},children:"Confirmer le paiement"})]},e._id)})):Object(j.jsx)("h5",{children:"un probl\xe9me est survenu.."})})]})},Nt=(r(193),function(e){var t=e.item,r=Object(N.b)(),a=Object(N.c)((function(e){return e.order})).preOrder,n=Object(b.useState)(!1),c=Object(B.a)(n,2),s=c[0],i=c[1],u=Object(b.useState)({price:0,quantity:0,comment:""}),o=Object(B.a)(u,2),l=o[0],d=o[1],O=l.price,m=l.quantity,p=l.comment;Object(b.useEffect)((function(){var e=a.filter((function(e){return e.name===t.name}))[0];e&&d({price:e.price,quantity:e.quantity,comment:e.comment})}),[]);var f=function(){s&&r(dt({name:t.name,comment:p})),i(!s)};return Object(j.jsxs)("div",{className:"client-menu-item",children:[Object(j.jsxs)("div",{className:"client-menu-item__group",children:[Object(j.jsxs)("div",{className:"client-menu-item__info",children:[Object(j.jsx)("p",{children:t.name}),Object(j.jsxs)("p",{children:[t.price," dt"]})]}),Object(j.jsx)("img",{src:t.image,alt:"food"})]}),Object(j.jsx)("p",{className:"client-menu-item__desc",children:t.description}),Object(j.jsxs)("div",{className:"client-menu-item__footer",children:[Object(j.jsxs)("span",{className:"client-menu-item__price",children:["Total: ",O>0?O:0," DT"]}),Object(j.jsxs)("div",{className:"client-menu-item__buttons",children:[Object(j.jsx)("button",{className:"client-menu-item__button",onClick:function(){if(m>0){a=t.price,m>0&&d(Object(g.a)(Object(g.a)({},l),{},{quantity:Number(m)-1,price:Number(O)-Number(a)}));var e=He()().format();r(lt({name:t.name,price:t.price,createdAt:e}))}var a},children:"-"}),Object(j.jsx)("span",{children:m}),Object(j.jsx)("button",{className:"client-menu-item__button",onClick:function(){var e;e=t.price,d(Object(g.a)(Object(g.a)({},l),{},{quantity:Number(m)+1,price:Number(O)+Number(e)}));var a=He()().format();r(ot({name:t.name,price:t.price,comment:p,createdAt:a}))},children:"+"})]})]}),Object(j.jsxs)("div",{className:"client-menu-item__comment",children:[m>0?Object(j.jsx)("button",{className:"comment__button",onClick:f,children:"ajouter un commentaire"}):Object(j.jsx)("button",{className:"comment__button",onClick:f,disabled:!0,children:"ajouter un commentaire"}),s&&m>0&&Object(j.jsx)("textarea",{value:p,onChange:function(e){d(Object(g.a)(Object(g.a)({},l),{},{comment:e.target.value}))},rows:"3",cols:"20",children:"commentaire.."})]})]})}),St=(r(194),function(e){var t=e.menu,r=Object(b.useState)({orderId:null,items:[],total:0,numberOfItems:0,categorie:"entree"}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.items,i=n.total,u=n.categorie,o=n.numberOfItems,l=Object(N.b)(),d=Object(N.c)((function(e){return e.order})),O=d.preOrder,m=d.order;d.orderStatus;Object(b.useEffect)((function(){return l(jt()),function(){l(jt())}}),[]),Object(b.useEffect)((function(){c(Object(g.a)(Object(g.a)({},n),{},{items:O}))}),[O]),Object(b.useEffect)((function(){var e=localStorage.getItem("id");e&&(l(Ze(e)),c(Object(g.a)(Object(g.a)({},n),{},{orderId:e})))}),[]),Object(b.useEffect)((function(){if(s.length>0){var e=s.reduce((function(e,t){return Number(e)+Number(t.price)}),0),t=s.reduce((function(e,t){return Number(e)+Number(t.quantity)}),0);c(Object(g.a)(Object(g.a)({},n),{},{total:e,numberOfItems:t}))}else c(Object(g.a)(Object(g.a)({},n),{},{total:0,numberOfItems:0}))}),[s]);var p=Object(h.g)(),x=localStorage.getItem("restId"),v=localStorage.getItem("tableNumber"),_=m&&!m.order.paid&&Object(j.jsx)(f.b,{to:{pathname:"/client-page/order",state:{orderId:m.order._id}},children:Object(j.jsx)("span",{className:"client-menu__link",children:"Mes choix"})}),w=t&&t.menu.items?Object(j.jsx)(b.Fragment,{children:t.menu.items.filter((function(e){return e.categorie===u})).length>0&&Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)("p",{className:"client-menu__categorie",children:u}),Object(j.jsx)("div",{className:"client-menu__sub",children:t.menu.items.filter((function(e){return e.categorie===u})).map((function(e){return Object(j.jsx)(Nt,{item:e},e._id)}))})]})}):Object(j.jsx)("h5",{children:"Loading..."}),S=function(e){c(Object(g.a)(Object(g.a)({},n),{},{categorie:e}))};return Object(j.jsxs)("div",{className:"client-menu",children:[Object(j.jsxs)("div",{className:"client-menu__menu",children:[Object(j.jsx)("button",{className:"entree"===u?"active-categorie":"inactive-categorie",onClick:function(){return S("entree")},children:"entr\xe9e"}),Object(j.jsx)("button",{className:"plat"===u?"active-categorie":"inactive-categorie",onClick:function(){return S("plat")},children:"plat"}),Object(j.jsx)("button",{className:"boisson"===u?"active-categorie":"inactive-categorie",onClick:function(){return S("boisson")},children:"boisson"}),Object(j.jsx)("button",{className:"Dessert"===u?"active-categorie":"inactive-categorie",onClick:function(){return S("Dessert")},children:"dessert"})]}),Object(j.jsx)("div",{className:"client-menu__items",children:w}),Object(j.jsxs)("div",{className:"client-menu__nav",children:[_,Object(j.jsxs)("p",{className:"client-menu__total",children:[Object(j.jsxs)("span",{style:{color:"white"},children:[i," DT"]}),Object(j.jsxs)("span",{style:{color:"white"},children:["(",o," \xe9lements)"]})]}),Object(j.jsx)("button",{onClick:function(){return function(){var e=localStorage.getItem("id");s.length>0&&(e&&m&&!m.order.paid?l(Ye({data:{items:s,total:i,orderId:e},history:p})):l(Xe({data:{items:s,total:i,restId:x,tableNumber:v},history:p})))}()},children:"Commander"})]})]})}),kt=r(98),yt=(r(195),function(e){var t=e.channel,r=Object(b.useState)({editStatus:{toEdit:!1,itemId:null,unitPrice:0},editOrder:null,oldQuantity:0}),a=Object(B.a)(r,2),n=a[0],c=a[1],s=n.editStatus,i=n.editOrder,u=n.oldQuantity,o=Object(N.b)(),l=Object(h.h)(),d=Object(h.g)(),O=l.state.orderId;Object(b.useEffect)((function(){o(Ze(O))}),[O]),Object(b.useEffect)((function(){t&&(t.on("message",(function(e){o(Ze(O))})),t.on("checkout",(function(e){d.push("/client-page")})))}),[t]);var m=Object(N.c)((function(e){return e.order})),p=m.order,x=m.orderStatus;Object(b.useEffect)((function(){p.order.items&&c(Object(g.a)(Object(g.a)({},n),{},{editOrder:p.order.items}))}),[p]);var v=function(e){var t=p.order.preOrder;if(t.length>0&&t.filter((function(t){return t.itemId===e._id}))[0])return e.confirmed?t.filter((function(t){return t.itemId===e._id}))[0].confirmed?Object(j.jsx)("p",{className:"request__msg--valid",children:"votre demande est valid\xe9e"}):Object(j.jsx)("p",{className:"request__msg--rejected",children:"votre demande est rejet\xe9e"}):Object(j.jsxs)("p",{className:"request__msg--waiting",children:["en attente de","confirmation"]})};return Object(j.jsxs)("div",{className:"order",children:[Object(j.jsx)("h2",{children:"A Payer"}),"loading"===x.getOne?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"succeded"===x.getOne?i&&i.length>0&&i.map((function(e){return Object(j.jsxs)("div",{className:"order__item",children:[Object(j.jsxs)("div",{className:"order__item__head",children:[Object(j.jsx)("p",{children:e.name}),Object(j.jsxs)("div",{className:"order__item__info",children:[Object(j.jsx)("p",{children:e.quantity}),Object(j.jsxs)("p",{children:[e.price," DT"]})]})]}),Object(j.jsxs)("div",{className:"order__item__foot",children:[Object(j.jsx)("span",{className:"order__item__foot__result",children:v(e)}),Object(j.jsxs)("div",{children:[s.toEdit&&e._id===s.itemId&&Object(j.jsxs)(b.Fragment,{children:[Object(j.jsx)("button",{className:"order__req__but",onClick:function(){return function(e){var t=i.findIndex((function(t){return t._id===e})),r=Object(Ke.a)(i);r[t]=Object(g.a)(Object(g.a)({},r[t]),{},{quantity:r[t].quantity+1,price:Number(r[t].price)+Number(s.unitPrice)}),c(Object(g.a)(Object(g.a)({},n),{},{editOrder:r}))}(e._id)},children:Object(j.jsx)("span",{children:Object(j.jsx)(z.b.Provider,{value:{className:"order-icon--valid"},children:Object(j.jsx)(K.c,{})})})}),Object(j.jsx)("button",{className:"order__req__but",onClick:function(){return function(e){var t=i.findIndex((function(t){return t._id===e})),r=Object(Ke.a)(i);r[t].quantity>1&&(r[t]=Object(g.a)(Object(g.a)({},r[t]),{},{quantity:r[t].quantity-1,price:Number(r[t].price)-Number(s.unitPrice)}),c(Object(g.a)(Object(g.a)({},n),{},{editOrder:r})))}(e._id)},children:Object(j.jsx)("span",{children:Object(j.jsx)("div",{children:Object(j.jsx)(z.b.Provider,{value:{className:"order-icon--delete"},children:Object(j.jsx)(K.b,{})})})})})]}),Object(j.jsx)("button",{className:"order__req__but",onClick:function(){return t=e._id,void o(rt({itemId:t,orderId:O}));var t},children:Object(j.jsx)("span",{children:Object(j.jsx)("div",{children:Object(j.jsx)(z.b.Provider,{value:{className:"order-icon--delete"},children:Object(j.jsx)(R.a,{})})})})}),Object(j.jsx)("button",{className:"order__req__but",onClick:function(){return function(e){if(s.toEdit){var t=i.filter((function(t){return t._id===e._id}))[0],r={newQuantity:t.quantity,newPrice:t.price,newComment:""};Number(u)!==Number(t.quantity)&&o(ct({itemId:s.itemId,orderId:O,newValues:r})),c(Object(g.a)(Object(g.a)({},n),{},{editStatus:{toEdit:!1,itemId:null}}))}else c(Object(g.a)(Object(g.a)({},n),{},{oldQuantity:e.quantity,editStatus:{toEdit:!0,itemId:e._id,unitPrice:Number(e.price)/Number(e.quantity)}}))}(e)},children:Object(j.jsx)("span",{children:Object(j.jsx)("div",{children:Object(j.jsx)(z.b.Provider,{value:{className:"order-icon--valid"},children:Object(j.jsx)(kt.a,{})})})})})]})]})]},e._id)})):Object(j.jsx)("h5",{children:"un probl\xe9me est survenu.."}),Object(j.jsxs)("div",{className:"order__item__total",children:[Object(j.jsx)("p",{children:"total"}),Object(j.jsxs)("p",{children:["loading"===x.getOne?Object(j.jsx)("span",{children:"loading.."}):"succeded"===x.getOne?p&&p.order.total:null,"DT"]})]}),Object(j.jsx)("div",{className:"client-menu__nav",children:Object(j.jsx)(f.b,{to:"/client-page",children:Object(j.jsx)("button",{className:"client-menu__nav__back",children:"retour au menu "})})})]})}),Et=(r(196),window.location.hostname),Ct=function(){var e=Object(b.useState)(null),t=Object(B.a)(e,2),r=t[0],a=t[1],n=Object(N.b)(),c=localStorage.getItem("restId");Object(b.useEffect)((function(){n(ke(c))}),[]),Object(b.useEffect)((function(){var e=je()("".concat(Et,"/restaurant-space"),{transports:["websocket","polling"],secure:!0});a(e),e.on("connect",(function(){console.log(e.id)})),c&&e.emit("joinRoom",{restId:c}),e.on("newMenu",(function(e){console.log("newmenu",e),n(ke(c))}))}),[]);var s=Object(N.c)((function(e){return e.menu})),i=s.menu,u=s.menuStatus,o="loading"===u.getMenu?Object(j.jsx)(z.b.Provider,{value:{className:"spinner--large"},children:Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{})})}):"succeded"===u.getMenu&&i?0===i.menu.items.length?Object(j.jsx)("p",{children:" Ce menu n'est pas encore disponible"}):Object(j.jsx)(St,{menu:i,restaurantId:c}):Object(j.jsx)("h5",{children:"Something went wrong..."});return Object(j.jsx)("div",{className:"client-section",children:Object(j.jsxs)(h.d,{children:[Object(j.jsxs)(h.b,{exact:!0,path:"/client-page",children:[Object(j.jsxs)("div",{className:"client-section__info",children:[Object(j.jsx)("h2",{children:"Menu"}),Object(j.jsx)("div",{className:"client-section__info__image",children:Object(j.jsx)("img",{src:"/"+(i&&i.menu.restaurant.logo),alt:"logo"})}),Object(j.jsx)("h2",{children:i&&i.menu.restaurant.name})]}),o]}),Object(j.jsx)(h.b,{exact:!0,path:"/client-page/order",children:Object(j.jsx)(yt,{channel:r})})]})})};var It=function(){return localStorage.token&&_(localStorage.token),Object(j.jsx)("div",{className:"app",children:Object(j.jsxs)(f.a,{children:[Object(j.jsx)(ee,{}),Object(j.jsxs)(h.d,{children:[Object(j.jsx)(h.b,{exact:!0,path:"/",children:Object(j.jsx)(H,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/signin",children:Object(j.jsx)(te,{})}),Object(j.jsx)(h.b,{exact:!0,path:"/scan-code",children:Object(j.jsx)(ae,{})}),Object(j.jsx)(k,{path:"/client-page",children:Object(j.jsx)(Ct,{})}),Object(j.jsx)(S,{exact:!0,path:"/admin-section",children:Object(j.jsx)(Oe,{})}),Object(j.jsx)(S,{path:"/owner-section",children:Object(j.jsx)(_t,{})}),Object(j.jsx)(S,{path:"/worker-section",children:Object(j.jsx)(wt,{})}),Object(j.jsx)(h.a,{to:"/"})]})]})})},At=Object(A.a)({reducer:{auth:L,admin:ue,owner:xe,menu:Ie,table:We,order:bt,staff:Te,contact:Q,adherent:G}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.a.render(Object(j.jsx)(O.a.StrictMode,{children:Object(j.jsx)(N.a,{store:At,children:Object(j.jsx)(It,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[197,1,2]]]);
//# sourceMappingURL=main.c3d997e2.chunk.js.map